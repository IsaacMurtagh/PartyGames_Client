(function(e){function t(t){for(var n,i,c=t[0],s=t[1],u=t[2],d=0,m=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);l&&l(t);while(m.length)m.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,c=1;c<a.length;c++){var s=a[c];0!==r[s]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={app:0},o=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/PartyGames_Client/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=s;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"05ec":function(e){e.exports=JSON.parse('{"ENV":"production","BASE_URL":"https://45m4qhoe6i.execute-api.ap-southeast-2.amazonaws.com/api"}')},"116f":function(e,t,a){var n=a("970b").default,r=a("5bc3").default;a("a4d3"),a("e01a"),a("d81d"),a("7db0");var o=function(){"use strict";function e(t){n(this,e),this.description=t.description,this.id=t.id,this.chosen=!1}return r(e,[{key:"select",value:function(){this.chosen=!0}}]),e}(),i=function(){"use strict";function e(t){n(this,e),this.roundNumber=t.roundNumber,this.choices=t.choices.map((function(e){return new o(e)})),this.createdAt=new Date(t.createdAt),this.gameId=t.gameId}return r(e,[{key:"choiceId",get:function(){var e;return null===(e=this.choices.find((function(e){return e.chosen})))||void 0===e?void 0:e.id}},{key:"choiceMade",get:function(){return!!this.choices.find((function(e){return e.chosen}))}}]),e}();e.exports=i},"119b":function(e,t,a){},2756:function(e,t,a){"use strict";a("54c0")},"3d09":function(e){e.exports=JSON.parse('{"ENV":"development","API_BASE_URL":"https://lu6a9hth2f.execute-api.ap-southeast-2.amazonaws.com/api","WEBSOCKET_BASE_URL":"wss://jls4b61b8e.execute-api.ap-southeast-2.amazonaws.com/api"}')},5058:function(e,t,a){},"54c0":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-main",[e.appReady?a("router-view"):e._e()],1)],1)},o=[],i=a("5530"),c=a("2f62"),s={name:"App",computed:Object(i["a"])({},Object(c["c"])("app",["appReady"])),created:function(){this.$vuetify.theme.dark=this.isDarkModeEnabled(),this.$store.dispatch("app/init")},methods:{isDarkModeEnabled:function(){return"true"==window.localStorage.getItem("darkMode")}}},u=s,l=a("2877"),d=a("6544"),m=a.n(d),p=a("7496"),h=a("f6c4"),v=Object(l["a"])(u,r,o,!1,null,null,null),f=v.exports;m()(v,{VApp:p["a"],VMain:h["a"]});var g=a("f309");n["a"].use(g["a"]);var b=new g["a"]({theme:{themes:{}}}),y=a("8c4f"),w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"h-full pb-12",class:{"background-dark":e.darkMode}},[a("main-app-bar"),a("v-container",{staticClass:"pt-8",attrs:{"fill-height":""}},[a("v-row",[a("v-col",{attrs:{align:"center"}},[a("v-card",{attrs:{"p-2":""}},[a("v-card-text",[a("v-text-field",{attrs:{type:"text","hide-details":"",placeholder:"Get this off your friend after they've created a lobby",label:"Game Pin","prepend-inner-icon":"mdi-account-arrow-right-outline",solo:""},model:{value:e.joinGameInput,callback:function(t){e.joinGameInput=t},expression:"joinGameInput"}})],1),a("v-btn",{attrs:{height:"50",block:"",color:"primary"},on:{click:e.goToGame}},[e._v("Enter")])],1)],1)],1),a("v-row",[a("v-col",{attrs:{align:"center"}},[a("h2",{},[e._v("OR")])])],1),a("v-row",{staticClass:"h-1/3"},[a("v-col",{attrs:{justify:"top",align:"top"}},[a("v-sheet",{staticClass:"h-full"},[a("v-btn",{staticClass:"h-full",attrs:{block:"",tile:"","x-large":"",color:"primary"},on:{click:function(t){return e.$router.push("/create-game")}}},[e._v(" Create your own game")])],1)],1)],1)],1)],1)},C=[],x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-app-bar",{attrs:{app:"",color:"secondary"}},[a("v-app-bar-title",{staticClass:"cursor-pointer",attrs:{"aria-label":"party games",primary:""}},[a("span",{on:{click:function(t){return e.goToRoute("/")}}},[e._v("ðŸŽ‰ðŸ•¹")])]),a("v-spacer"),a("v-app-bar-nav-icon",{attrs:{right:""},on:{click:function(t){e.drawer=!e.drawer}}})],1),a("v-navigation-drawer",{attrs:{app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",[a("v-list-item",[a("v-switch",{attrs:{inset:"",label:"Dark Mode"},model:{value:e.$vuetify.theme.dark,callback:function(t){e.$set(e.$vuetify.theme,"dark",t)},expression:"$vuetify.theme.dark"}})],1),a("v-list-item-group",e._l(e.items,(function(t,n){return a("v-list-item",{key:n,on:{click:function(a){return e.goToRoute(t.route)}}},[a("v-list-item-icon",[a("v-icon",{domProps:{textContent:e._s(t.icon)}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:e._s(t.text)}})],1),a("v-list-item-action",[a("v-icon",{domProps:{textContent:e._s("mdi-chevron-right")}})],1)],1)})),1)],1)],1)],1)},_=[],k=a("1da1"),R=(a("96cf"),a("ac1f"),a("5319"),{data:function(){return{drawer:!1,items:[{icon:"mdi-home",text:"Home",route:"/"},{icon:"mdi-pencil",text:"Create game",route:"/create-game"},{icon:"mdi-account-multiple-plus",text:"Join game",route:"/join-game"}],selected:this.$route.path}},computed:{darkMode:function(){return this.$vuetify.theme.dark}},watch:{darkMode:function(){window.localStorage.setItem("darkMode",this.darkMode)}},methods:{goToRoute:function(e){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.drawer=!1,n="/"!=t.$route.path?t.$route.path.replace(/\/$/,""):"/",n!=e&&t.$router.push(e);case 3:case"end":return a.stop()}}),a)})))()}}}),O=R,j=(a("bc45"),a("40dc")),S=a("5bc1"),V=a("bb78"),N=a("132d"),G=a("8860"),E=a("da13"),I=a("1800"),A=a("5d23"),T=a("1baa"),D=a("34c3"),$=a("f774"),L=a("2fa4"),P=a("b73d"),M=Object(l["a"])(O,x,_,!1,null,"7bcc1cd1",null),B=M.exports;m()(M,{VAppBar:j["a"],VAppBarNavIcon:S["a"],VAppBarTitle:V["a"],VIcon:N["a"],VList:G["a"],VListItem:E["a"],VListItemAction:I["a"],VListItemContent:A["a"],VListItemGroup:T["a"],VListItemIcon:D["a"],VListItemTitle:A["b"],VNavigationDrawer:$["a"],VSpacer:L["a"],VSwitch:P["a"]});var U={name:"Dashboard",components:{MainAppBar:B},data:function(){return{joinGameInput:""}},computed:{darkMode:function(){return this.$vuetify.theme.dark}},methods:{goToGame:function(){var e=this.joinGameInput.substring(this.joinGameInput.lastIndexOf("/"));e&&this.$router.push("/game/".concat(e))}}},W=U,F=(a("2756"),a("8336")),J=a("b0af"),z=a("99d9"),Y=a("62ad"),q=a("a523"),H=a("0fd9"),K=a("8dd9"),Z=a("8654"),Q=Object(l["a"])(W,w,C,!1,null,"86ee9c08",null),X=Q.exports;m()(Q,{VBtn:F["a"],VCard:J["a"],VCardText:z["b"],VCol:Y["a"],VContainer:q["a"],VRow:H["a"],VSheet:K["a"],VTextField:Z["a"]});var ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("main-app-bar"),a("v-container",[a("v-row",[a("v-col",{attrs:{align:"center"}},[a("h1",[e._v("Create your Game!")]),a("span",{staticClass:"subtitle-1"},[e._v(" You're almost there, all you need to do is continue, share the link and once your friends are in... "),a("b",[e._v("START!")])])])],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{staticClass:"col-md-8",attrs:{align:"center"}},[a("v-form",{ref:"form",on:{submit:e.createGame}},[a("v-card",{staticClass:"pa-4",attrs:{align:"left",elevation:"1"}},[a("div",{staticClass:"subtitle-2 pb-2 d-flex justify-space-between align-center"},[a("div",[e._v("Game Type: Would You Rather")]),a("info-dialog",{scopedSlots:e._u([{key:"header",fn:function(){return[e._v("Would You Rather")]},proxy:!0},{key:"content",fn:function(){return[a("div",{staticClass:"pb-4"},[e._v("Currently, "),a("b",[e._v("Would You Rather")]),e._v(" is the only supported game mode. "),a("br")]),a("h2",{staticClass:"pb-1"},[e._v("How to play")]),a("ol",[a("li",[e._v("Create a room for this game mode, and then share the link provided with your friends so they can join you.")]),a("li",[e._v("Once all in and you've chosen your names, the host starts the game.")]),a("li",[e._v("Each player is presented with the same set of images, and individually you must choose what you prefer. For example, ice-cream or frozen yogurt.")]),a("li",[e._v("After the rounds, you will all proceed to a summary page where you can analyse results and compare choices!")])])]},proxy:!0}])})],1),a("v-text-field",{attrs:{counter:e.maxLengthRoomName,rules:e.roomNameRules,type:"text",placeholder:"Enter Room Name",label:"Room Name","prepend-inner-icon":"mdi-home",solo:""},model:{value:e.roomName,callback:function(t){e.roomName="string"===typeof t?t.trim():t},expression:"roomName"}}),a("v-expansion-panels",[a("v-expansion-panel",[a("v-expansion-panel-header",[e._v(" Advanced Settings ")]),a("v-expansion-panel-content",[a("v-slider",{attrs:{max:e.maxNumberRounds,min:1,label:"Num Rounds","thumb-label":"always",ticks:""},model:{value:e.numberRounds,callback:function(t){e.numberRounds=t},expression:"numberRounds"}}),a("v-slider",{attrs:{max:e.maxRoundTimeSeconds,min:3,label:"Seconds per round","thumb-label":"always",ticks:""},model:{value:e.roundTimeSeconds,callback:function(t){e.roundTimeSeconds=t},expression:"roundTimeSeconds"}})],1)],1)],1)],1),a("v-col",[a("v-btn",{staticClass:"block primary",attrs:{width:"66%",type:"submit",loading:e.createGameLoading}},[e._v(" Continue ")])],1)],1)],1)],1)],1)],1)},te=[],ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center"},[a("v-dialog",{attrs:{width:"550"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",r,!1),n),[a("v-icon",{domProps:{textContent:e._s("mdi-information-outline")}})],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5"},[e._t("header")],2),a("v-card-text",{staticClass:"text-subtitle-2"},[e._t("content")],2),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){e.dialog=!1}}},[e._v(" Ok ")])],1)],1)],1)],1)},ne=[],re={data:function(){return{dialog:!1}}},oe=re,ie=a("169a"),ce=a("ce7e"),se=Object(l["a"])(oe,ae,ne,!1,null,null,null),ue=se.exports;m()(se,{VBtn:F["a"],VCard:J["a"],VCardActions:z["a"],VCardText:z["b"],VCardTitle:z["c"],VDialog:ie["a"],VDivider:ce["a"],VIcon:N["a"],VSpacer:L["a"]});var le=16,de=120,me={name:"CreateGame",components:{MainAppBar:B,InfoDialog:ue},data:function(){return{roomName:"",maxLengthRoomName:le,roomNameRules:[function(e){return!!e||"Name is required"},function(e){return e.length<=le||"Room name cannot be more than ".concat(le," characters")}],numberRounds:8,roundTimeSeconds:8}},computed:Object(i["a"])(Object(i["a"])({},Object(c["c"])("game",["createGameLoading","game"])),{},{maxNumberRounds:function(){return Math.min(15,Math.floor(de/this.roundTimeSeconds))},maxRoundTimeSeconds:function(){return Math.min(15,Math.floor(de/this.numberRounds))}}),methods:{createGame:function(e){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.preventDefault(),n=t.$refs.form.validate(),!n){a.next=6;break}return a.next=5,t.$store.dispatch("game/createGame",{name:t.roomName,type:"WouldYouRather",roundTimeSeconds:t.roundTimeSeconds,numberRounds:t.numberRounds});case 5:t.game&&t.$router.push("/game/".concat(t.game.id));case 6:case"end":return a.stop()}}),a)})))()}}},pe=me,he=a("cd55"),ve=a("49e2"),fe=a("c865"),ge=a("0393"),be=a("4bd4"),ye=a("ba0d"),we=Object(l["a"])(pe,ee,te,!1,null,null,null),Ce=we.exports;m()(we,{VBtn:F["a"],VCard:J["a"],VCol:Y["a"],VContainer:q["a"],VExpansionPanel:he["a"],VExpansionPanelContent:ve["a"],VExpansionPanelHeader:fe["a"],VExpansionPanels:ge["a"],VForm:be["a"],VRow:H["a"],VSlider:ye["a"],VTextField:Z["a"]});var xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("main-app-bar"),a("v-row",[a("v-col",{staticClass:"pt-12",attrs:{align:"center"}},[a("h2",[e._v("The creator of the game should have a link to share with you.")])])],1)],1)},_e=[],ke={name:"JoinGame",components:{MainAppBar:B}},Re=ke,Oe=Object(l["a"])(Re,xe,_e,!1,null,null,null),je=Oe.exports;m()(Oe,{VCol:Y["a"],VRow:H["a"]});var Se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("game-app-bar",{attrs:{"game-name":e.gameName}}),a(e.currentComponent,{tag:"component"}),a("choose-display-name",{attrs:{display:!!e.game&&!e.myDisplayName},on:{"chosen-display-name":e.setDisplayName}})],1)},Ve=[],Ne=(a("b0c0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",{attrs:{align:"center"}},[a("div",{staticClass:"d-flex justify-center"},[a("h2",{staticClass:"px-2"},[e._v(e._s(e.gameType))]),a("info-dialog",{scopedSlots:e._u([{key:"header",fn:function(){return[e._v("Would You Rather")]},proxy:!0},{key:"content",fn:function(){return[a("div",{staticClass:"pb-4"},[e._v("Currently, "),a("b",[e._v("Would You Rather")]),e._v(" is the only supported game mode. "),a("br")]),a("h2",{staticClass:"pb-1"},[e._v("How to play")]),a("ol",[a("li",[e._v("Create a room for this game mode, and then share the link provided with your friends so they can join you.")]),a("li",[e._v("Once all in and you've chosen your names, the host starts the game.")]),a("li",[e._v("Each player is presented with the same set of images, and individually you must choose what you prefer. For example, ice-cream or frozen yogurt.")]),a("li",[e._v("After the rounds, you will all proceed to a summary page where you can analyse results and compare choices!")])])]},proxy:!0}])})],1)])],1),a("v-row",e._l(e.participantsAsList,(function(e,t){return a("v-col",{key:t,attrs:{align:"center"}},[a("player-avatar",{attrs:{player:e}})],1)})),1),a("v-bottom-navigation",{attrs:{absolute:"","input-value":!!e.myDisplayName}},[a("v-spacer"),a("v-btn",{on:{click:e.copyGameLink}},[a("span",[e._v("Share Link")]),a("v-icon",[e._v("mdi-clipboard-text")])],1),a("v-spacer"),a("v-btn",{attrs:{disbled:!e.myPlayer},on:{click:e.startGame}},[a("span",[e._v("Start Game")]),a("v-icon",[e._v("mdi-door-open")])],1),a("v-spacer")],1),a("v-snackbar",{attrs:{timeout:2e3,value:e.displayCopySnack,center:"",shaped:"",top:""}},[e._v(" Game link copied, share with your friends. ")])],1)}),Ge=[],Ee=function(e){return e.replace(/([a-z])([A-Z])/g,"$1 $2")},Ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-avatar",{attrs:{size:e.large?"144":"32",color:e.avatarColour}},[a("v-icon",{attrs:{size:e.large?"56":"24",dark:""}},[e._v(" mdi-account-circle ")])],1),a("div",[a("h4",[e._v(e._s(e.player.displayName))])])],1)},Ae=[],Te=(a("cb29"),function(e){return Array(e.length).fill(0).reduce((function(t,a,n){return t+e.charCodeAt(n)}),0)}),De={props:{player:{type:Object,required:!0},large:{type:Boolean,default:!0}},data:function(){return{avatarColours:["red","green","blue","pink","orange","indigo","brown","yellow","teal","cyan","purple"]}},computed:{avatarColour:function(){var e=Te(this.player.alias)%this.avatarColours.length;return this.avatarColours[e]}}},$e=De,Le=a("8212"),Pe=Object(l["a"])($e,Ie,Ae,!1,null,null,null),Me=Pe.exports;m()(Pe,{VAvatar:Le["a"],VIcon:N["a"]});var Be={name:"GameLobby",data:function(){return{displayCopySnack:!1}},components:{PlayerAvatar:Me,InfoDialog:ue},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(c["c"])("game",["game"])),Object(c["b"])("game",["participantsAsList","myPlayer","myDisplayName"])),Object(c["b"])("webSocket",["connected"])),{},{gameType:function(){return Ee(this.game.type)}}),methods:{startGame:function(){this.$store.dispatch("webSocket/startGame")},copyGameLink:function(){this.displayCopySnack=!0,navigator.clipboard.writeText(window.location.href)}}},Ue=Be,We=a("b81c"),Fe=a("2db4"),Je=Object(l["a"])(Ue,Ne,Ge,!1,null,null,null),ze=Je.exports;m()(Je,{VBottomNavigation:We["a"],VBtn:F["a"],VCol:Y["a"],VContainer:q["a"],VIcon:N["a"],VRow:H["a"],VSnackbar:Fe["a"],VSpacer:L["a"]});var Ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("div",[a("v-row",[a("v-col",{attrs:{align:"center"}},[a("h2",[e._v(e._s(e.roomHeader))])])],1)],1),e.currentRound?a("div",[a("v-row",[a("v-col",[a("v-progress-linear",{attrs:{color:"light-blue",height:"50",value:e.roundCompletedPercentage,striped:""}})],1)],1),a("v-row",e._l(e.currentRound.choices,(function(t){return a("v-col",{key:t.id,attrs:{cols:"6"}},[a("choice-tile",{attrs:{choice:t,disabled:e.currentRound.choiceMade},on:{"choice-selected":e.handleChoiceSelected}})],1)})),1)],1):e._e()])},qe=[],He=(a("99af"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-sheet",{staticClass:"justify-center",attrs:{align:"center",height:"200"}},[a("v-btn",{staticClass:"h-full",class:{cyan:e.choice.chosen},attrs:{block:"",tile:"","x-large":""},on:{click:e.handleSelected}},[e._v(" "+e._s(e.choice.description)+" ")])],1)}),Ke=[],Ze={props:{choice:{type:Object,required:!0},disabled:{type:Boolean,required:!0}},methods:{handleSelected:function(){this.disabled||(this.choice.select(),this.$emit("choice-selected"))}}},Qe=Ze,Xe=(a("7bc3"),Object(l["a"])(Qe,He,Ke,!1,null,null,null)),et=Xe.exports;m()(Xe,{VBtn:F["a"],VSheet:K["a"]});var tt={data:function(){return{now:new Date,interval:null}},components:{ChoiceTile:et},computed:Object(i["a"])(Object(i["a"])({},Object(c["c"])("game",["game","currentRound"])),{},{roomHeader:function(){return this.currentRound?"Round ".concat(this.currentRound.roundNumber,"/").concat(this.game.numberRounds):"Round starting soon..."},roundCompletedPercentage:function(){return this.currentRound?Math.ceil((this.now-this.currentRound.createdAt)/this.game.roundTimeMs*100):0}}),created:function(){var e=this;this.interval=setInterval((function(){e.now=new Date}),100)},destroyed:function(){clearInterval(this.interval)},methods:{handleChoiceSelected:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("posting"),t.next=3,e.$store.dispatch("game/makeChoice");case 3:case"end":return t.stop()}}),t)})))()}}},at=tt,nt=a("8e36"),rt=Object(l["a"])(at,Ye,qe,!1,null,null,null),ot=rt.exports;m()(rt,{VCol:Y["a"],VContainer:q["a"],VProgressLinear:nt["a"],VRow:H["a"]});var it=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",{attrs:{align:"center"}},[a("h1",{staticClass:"py-12"},[e._v("Game Not Found")])])],1)],1)},ct=[],st={},ut=Object(l["a"])(st,it,ct,!1,null,null,null),lt=ut.exports;m()(ut,{VCol:Y["a"],VContainer:q["a"],VRow:H["a"]});var dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",{attrs:{align:"center"}},[a("h1",[e._v("Game Summary")])])],1),e.game.summary?a("div",e._l(e.game.summary.results,(function(t){return a("v-card",{key:t.round,staticClass:"ma-4"},e._l(t.choices,(function(t){return a("v-col",{key:t.id},[a("h2",[e._v(e._s(t.description))]),e._l(t.votes,(function(t){return a("playerAvatar",{key:t,staticClass:"d-inline-block pr-2",attrs:{player:e.game.participants[t],large:!1}})}))],2)})),1)})),1):a("v-row",[a("v-col",{attrs:{align:"center"}},[a("loading")],1)],1)],1)},mt=[],pt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center pa-16"},[a("v-progress-circular",{attrs:{indeterminate:"",size:70}})],1)},ht=[],vt=a("490a"),ft={},gt=Object(l["a"])(ft,pt,ht,!1,null,null,null),bt=gt.exports;m()(gt,{VProgressCircular:vt["a"]});var yt={components:{Loading:bt,PlayerAvatar:Me},computed:Object(i["a"])({},Object(c["c"])("game",["game"]))},wt=yt,Ct=Object(l["a"])(wt,dt,mt,!1,null,null,null),xt=Ct.exports;m()(Ct,{VCard:J["a"],VCol:Y["a"],VContainer:q["a"],VRow:H["a"]});var _t=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-app-bar",{attrs:{app:""}},[a("v-app-bar-title",[e._v(e._s(e.gameName.toUpperCase()))]),a("v-spacer"),a("v-btn",{on:{click:function(t){return e.$router.push("/")}}},[e._v("Leave")])],1)],1)},kt=[],Rt={props:{gameName:{type:String,default:""}}},Ot=Rt,jt=Object(l["a"])(Ot,_t,kt,!1,null,null,null),St=jt.exports;m()(jt,{VAppBar:j["a"],VAppBarTitle:V["a"],VBtn:F["a"],VSpacer:L["a"]});var Vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center"},[a("v-dialog",{attrs:{persistent:"",width:"550"},model:{value:e.display,callback:function(t){e.display=t},expression:"display"}},[a("v-form",{ref:"form",on:{submit:e.chosenDisplayName}},[a("v-card",{attrs:{align:"center"}},[a("v-card-title",{staticClass:"text-h5 justify-center"},[a("h3",[e._v("Choose your name")])]),a("v-spacer"),a("v-card-text",[a("v-text-field",{attrs:{counter:e.maxLengthDisplayName,rules:e.roomNameRules,type:"text",placeholder:"Enter your display name",label:"Display Name","prepend-inner-icon":"mdi-account-circle",solo:""},model:{value:e.displayName,callback:function(t){e.displayName="string"===typeof t?t.trim():t},expression:"displayName"}})],1),a("v-divider"),a("v-card-actions",{staticClass:"justify-center"},[a("v-btn",{staticClass:"mx-4",attrs:{color:"secondary",text:""},on:{click:function(t){return e.$router.push("/")}}},[e._v(" Leave ")]),a("v-btn",{staticClass:"mx-4",attrs:{color:"primary",type:"submit"}},[e._v(" Continue ")])],1)],1)],1)],1)],1)},Nt=[],Gt=14,Et={props:{display:{type:Boolean,required:!0}},data:function(){return{displayName:"",maxLengthDisplayName:Gt,roomNameRules:[function(e){return!!e||"Name is required"},function(e){return e.length<=Gt||"Display name cannot be more than ".concat(Gt," characters")}]}},methods:{chosenDisplayName:function(e){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.preventDefault(),n=t.$refs.form.validate(),n&&t.$emit("chosen-display-name",t.displayName);case 3:case"end":return a.stop()}}),a)})))()}}},It=Et,At=Object(l["a"])(It,Vt,Nt,!1,null,null,null),Tt=At.exports;m()(At,{VBtn:F["a"],VCard:J["a"],VCardActions:z["a"],VCardText:z["b"],VCardTitle:z["c"],VDialog:ie["a"],VDivider:ce["a"],VForm:be["a"],VSpacer:L["a"],VTextField:Z["a"]});var Dt={name:"GameScreen",components:{Loading:bt,GameAppBar:St,Lobby:ze,ChooseDisplayName:Tt,Rounds:ot,Summary:xt,GameNotFound:lt},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(c["c"])("game",["game","initGameLoading","initError"])),Object(c["b"])("game",["myDisplayName","myPlayer"])),Object(c["c"])("app",["user"])),Object(c["c"])("webSocket",["messages"])),{},{currentComponent:function(){return this.initGameLoading?"Loading":this.initError?"GameNotFound":this.game.inProgress?"Rounds":this.game.finished?"Summary":"Lobby"},gameName:function(){var e;return(null===(e=this.game)||void 0===e?void 0:e.name)||""}}),watch:{myDisplayName:function(){this.createWebsocketConnection()}},created:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("game/init",e.$route.params.gameId);case 2:e.myPlayer&&e.$store.dispatch("game/addSelfToParticipants"),!e.initError&&e.myDisplayName&&e.createWebsocketConnection();case 4:case"end":return t.stop()}}),t)})))()},destroyed:function(){this.$store.dispatch("webSocket/destroyConnection"),this.$store.dispatch("game/resetGameState")},methods:{handleOnMessage:function(e){this.messages.push(e.data)},createWebsocketConnection:function(){!this.game.finished&&this.$store.dispatch("webSocket/createConnection",{gameId:this.game.id,userId:this.user.id,displayName:this.myDisplayName})},setDisplayName:function(e){this.$store.commit("game/setChosenDisplayName",e)}}},$t=Dt,Lt=Object(l["a"])($t,Se,Ve,!1,null,null,null),Pt=Lt.exports;n["a"].use(y["a"]);var Mt=[{path:"/",name:"Dashboard",component:X},{path:"/create-game",name:"CreateGame",component:Ce},{path:"/join-game",name:"JoinGame",component:je},{path:"/game/:gameId",name:"PlayGame",component:Pt}],Bt=new y["a"]({mode:"history",base:"/PartyGames_Client/",routes:Mt}),Ut=Bt,Wt=a("bc3a"),Ft=a.n(Wt),Jt=a("04ac"),zt=a.n(Jt),Yt=a("3d09"),qt=a("05ec"),Ht=function(){switch(window.location.origin){case"https://admiradoco.com":return qt;default:return Yt}},Kt=Ht(),Zt=Ft.a.create({baseURL:Kt.API_BASE_URL,timeout:1e4,headers:{"Content-Type":"text/plain"}});zt()(Zt,{retries:3});var Qt={createUser:function(){return Zt.post("/users")},getUser:function(e){return Zt.get("/users/".concat(e))},createGame:function(e){var t=e.name,a=e.type,n=e.userId,r=e.roundTimeSeconds,o=e.numberRounds;return Zt.post("/games",{name:t,type:a,roundTimeSeconds:r,numberRounds:o,userId:n})},getGame:function(e){return Zt.get("/games/".concat(e))},makeChoice:function(e){var t=e.round,a=e.userId;return Zt.post("/games/".concat(t.gameId,"/round/").concat(t.roundNumber),{userId:a,choiceId:t.choiceId})}},Xt=a("d4ec"),ea=function e(t){Object(Xt["a"])(this,e),this.id=t.id,this.alias=t.alias,this.createdAt=new Date(t.createdAt),this.updatedAt=new Date(t.updatedAt)},ta=ea;function aa(e){var t=e.apiClient;return{namespaced:!0,state:function(){return{appReady:!1,user:null,initError:null}},mutations:{setAppReady:function(e,t){e.appReady=t},setInitError:function(e,t){e.initError=t},setUser:function(e,t){e.user=t}},actions:{createUser:function(e){return Object(k["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.dispatch,r=e.commit,a.next=3,t.createUser().then((function(e){n("saveUser",new ta(e.data))})).catch((function(e){r("setInitError",e)}));case 3:case"end":return a.stop()}}),a)})))()},init:function(e){return Object(k["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,n=e.dispatch,r=e.state,t.next=3,n("loadUser");case 3:if(r.user){t.next=6;break}return t.next=6,n("createUser");case 6:a("setAppReady",!0);case 7:case"end":return t.stop()}}),t)})))()},saveUser:function(e,t){var a=e.commit;a("setUser",t),localStorage.setItem("userId",t.id)},loadUser:function(e){return Object(k["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=e.dispatch,r=localStorage.getItem("userId"),!r){a.next=5;break}return a.next=5,t.getUser(r).then((function(e){n("saveUser",new ta(e.data))})).catch((function(){localStorage.removeItem("userId")}));case 5:case"end":return a.stop()}}),a)})))()}}}}var na=aa,ra=(a("4de4"),a("07ac"),a("bee2")),oa=function e(t){Object(Xt["a"])(this,e),this.alias=t.alias,this.displayName=t.displayName,this.active=t.active},ia=oa;function ca(e){return e.reduce((function(e,t){return e[t.alias]=new ia(t),e}),{})}var sa=function(){function e(t){Object(Xt["a"])(this,e),this.id=t.id,this.type=t.type,this.name=t.name,this.allowNicknames=t.allowNicknames,this.participants=t.participants,this.createdAt=t.createdAt,this.updatedAt=t.updatedAt,this.status=t.status,this.numberRounds=t.numberRounds,this.roundTimeSeconds=t.roundTimeSeconds,this.summary=t.summary}return Object(ra["a"])(e,[{key:"inProgress",get:function(){return"inprogress"==this.status}},{key:"finished",get:function(){return"finished"==this.status}},{key:"roundTimeMs",get:function(){return 1e3*this.roundTimeSeconds}}],[{key:"fromApiResponse",value:function(t){return new e(Object(i["a"])(Object(i["a"])({},t),{},{createdAt:new Date(t.createdAt),updatedAt:new Date(t.updatedAt),participants:ca(t.participants)}))}}]),e}(),ua=sa;function la(e){var t=e.apiClient;return{namespaced:!0,state:function(){return{game:null,initError:null,createGameError:null,createGameLoading:!1,initGameLoading:!0,chosenDisplayName:null,currentRound:null}},getters:{participantsAsList:function(e){return e.game?Object.values(e.game.participants).filter((function(e){return e.active})):[]},myPlayer:function(e,t,a){var n,r=a.app.user.alias;return null===(n=e.game)||void 0===n?void 0:n.participants[r]},myDisplayName:function(e,t){var a;return(null===(a=t.myPlayer)||void 0===a?void 0:a.displayName)||e.chosenDisplayName}},mutations:{setInitError:function(e,t){e.initError=t},setCreateGameError:function(e,t){e.createGameError=t},setGame:function(e,t){e.game=t},setCreateGameLoading:function(e,t){e.createGameLoading=t},setInitGameLoading:function(e,t){e.initGameLoading=t},addParticipant:function(e,t){var a=t.alias;n["a"].set(e.game.participants,a,t)},removeParticipantByAlias:function(e,t){n["a"].set(e.game.participants[t],"active",!1)},setChosenDisplayName:function(e,t){e.chosenDisplayName=t},setGameStatus:function(e,t){n["a"].set(e.game,"status",t)},setCurrentRound:function(e,t){e.currentRound=t}},actions:{addSelfToParticipants:function(e){var t=e.commit,a=e.rootState,n=e.getters;t("addParticipant",new ia({alias:a.app.user.alias,displayName:n.myDisplayName,active:!0}))},makeChoice:function(e){return Object(k["a"])(regeneratorRuntime.mark((function a(){var n,r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.state,r=e.rootState,o=n.currentRound,a.next=4,t.makeChoice({round:o,userId:r.app.user.id}).catch((function(e){console.error(e)}));case 4:case"end":return a.stop()}}),a)})))()},createGame:function(e,a){return Object(k["a"])(regeneratorRuntime.mark((function n(){var r,o,i,c,s,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,o=e.rootState,i=a.name,c=a.type,s=a.roundTimeSeconds,u=a.numberRounds,r("setCreateGameLoading",!0),n.next=5,t.createGame({name:i,type:c,roundTimeSeconds:s,numberRounds:u,userId:o.app.user.id}).then((function(e){r("setGame",ua.fromApiResponse(e.data))})).catch((function(e){r("setCreateGameError",e)}));case 5:r("setCreateGameLoading",!1);case 6:case"end":return n.stop()}}),n)})))()},getGame:function(e,a){return Object(k["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.next=3,t.getGame(a).then((function(e){r("setGame",ua.fromApiResponse(e.data))})).catch((function(e){r("setInitError",e)}));case 3:case"end":return n.stop()}}),n)})))()},init:function(e,t){return Object(k["a"])(regeneratorRuntime.mark((function a(){var n,r,o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=e.commit,o=e.dispatch,i=e.state,r("setInitGameLoading",!0),(null===(n=i.game)||void 0===n?void 0:n.id)==t){a.next=5;break}return a.next=5,o("getGame",t);case 5:r("setInitGameLoading",!1);case 6:case"end":return a.stop()}}),a)})))()},resetGameState:function(e){var t=e.commit;t("setGame",null),t("setChosenDisplayName",null),t("setInitError",null),t("setCreateGameError",null)}}}}var da=la,ma=a("116f"),pa=a.n(ma);function ha(e){var t=e.config;return{namespaced:!0,state:function(){return{connection:null}},getters:{connected:function(e){var t;return!(null===(t=e.connection)||void 0===t||!t.OPEN)}},mutations:{setConnection:function(e,t){e.connection=t},setInitError:function(e,t){e.initError=t}},actions:{destroyConnection:function(e){var t=e.commit,a=e.state;a.connection&&(a.connection.close(),t("setConnection",null))},createConnection:function(e,a){var n=e.dispatch,r=e.commit,o=e.state,i=a.userId,c=a.gameId,s=a.displayName;if(!o.connection){var u=new WebSocket("".concat(t.WEBSOCKET_BASE_URL,"?gameId=").concat(c,"&userId=").concat(i,"&displayName=").concat(s));r("setConnection",u),n("handleOnConnect"),n("handleOnMessage"),n("handleOnDisconnect")}},handleOnConnect:function(e){var t=e.state,a=e.dispatch,n=e.rootState;t.connection.onopen=function(e){console.log(e),a("game/addSelfToParticipants",null,{root:!0}),a("game/getGame",n.game.game.id,{root:!0})}},handleOnDisconnect:function(e){var t=e.state;t.connection.onclose=function(e){console.log(e)}},handleOnMessage:function(e){var t=e.state,a=e.commit,n=e.dispatch,r=e.rootState;t.connection.onmessage=function(e){var o=JSON.parse(e.data),i=o.data,c=o.message;switch(c){case"PLAYER_JOINED":a("game/addParticipant",new ia(i),{root:!0});break;case"PLAYER_LEFT":a("game/removeParticipantByAlias",i.alias,{root:!0});break;case"GAME_STARTED":a("game/setGameStatus","inprogress",{root:!0});break;case"NEW_ROUND":a("game/setCurrentRound",new pa.a(i),{root:!0});break;case"GAME_FINISHED":t.connection.close(),a("game/setGameStatus","finished",{root:!0}),n("game/getGame",r.game.game.id,{root:!0});break}console.log({data:i,message:c})}},startGame:function(e){var t=e.state;t.connection.send(JSON.stringify({action:"startgame"}))}}}}var va=ha;n["a"].use(c["a"]);var fa=new c["a"].Store({modules:{app:na({apiClient:Qt}),game:da({apiClient:Qt}),webSocket:va({apiClient:Qt,config:Kt})}}),ga=fa;n["a"].config.productionTip=!1,new n["a"]({vuetify:b,router:Ut,store:ga,render:function(e){return e(f)}}).$mount("#app")},"7bc3":function(e,t,a){"use strict";a("5058")},bc45:function(e,t,a){"use strict";a("119b")}});
//# sourceMappingURL=app.974189e1.js.map